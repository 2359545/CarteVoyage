<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Détails</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <div class="container">
        <h1>Entrer les détails pour <span id="region-name"></span></h1>
        <form id="details-form" action="save_region.php" method="POST">
            <input type="hidden" id="region" name="region">
            <label for="year">Année :</label>
            <select id="year" name="year" required>
                <script>
                    const yearSelect = document.getElementById('year');
                    const currentYear = new Date().getFullYear();
                    for (let year = currentYear; year >= 1950; year--) {
                        const option = document.createElement('option');
                        option.value = year;
                        option.textContent = year;
                        yearSelect.appendChild(option);
                    }
                    yearSelect.value = currentYear;
                </script>
            </select>
            <label for="note">Note :</label>
            <textarea id="note" name="note" required style="width:280px;"></textarea>
            <button type="submit">Enregistrer les détails</button>
        </form>
    </div>

    <script>
        const countryNamesInFrench = {
            'Afghanistan': 'Afghanistan',
            'Albania': 'Albanie',
            'Algeria': 'Algérie',
            'Andorra': 'Andorre',
            'Angola': 'Angola',
            'Antigua and Barbuda': 'Antigua-et-Barbuda',
            'Argentina': 'Argentine',
            'Armenia': 'Arménie',
            'Australia': 'Australie',
            'Austria': 'Autriche',
            'Azerbaijan': 'Azerbaïdjan',
            'Bahamas': 'Bahamas',
            'Bahrain': 'Bahreïn',
            'Bangladesh': 'Bangladesh',
            'Barbados': 'Barbade',
            'Belarus': 'Biélorussie',
            'Belgium': 'Belgique',
            'Belize': 'Belize',
            'Benin': 'Bénin',
            'Bhutan': 'Bhoutan',
            'Bolivia': 'Bolivie',
            'Bosnia and Herzegovina': 'Bosnie-Herzégovine',
            'Botswana': 'Botswana',
            'Brazil': 'Brésil',
            'Brunei': 'Brunei',
            'Bulgaria': 'Bulgarie',
            'Burkina Faso': 'Burkina Faso',
            'Burundi': 'Burundi',
            'Cabo Verde': 'Cap-Vert',
            'Cambodia': 'Cambodge',
            'Cameroon': 'Cameroun',
            'Canada': 'Canada',
            'Central African Republic': 'République centrafricaine',
            'Chad': 'Tchad',
            'Chile': 'Chili',
            'China': 'Chine',
            'Colombia': 'Colombie',
            'Comoros': 'Comores',
            'Congo (Congo-Brazzaville)': 'Congo (Brazzaville)',
            'Costa Rica': 'Costa Rica',
            'Croatia': 'Croatie',
            'Cuba': 'Cuba',
            'Cyprus': 'Chypre',
            'Czechia (Czech Republic)': 'Tchéquie (République tchèque)',
            'Democratic Republic of the Congo': 'République démocratique du Congo',
            'Denmark': 'Danemark',
            'Djibouti': 'Djibouti',
            'Dominica': 'Dominique',
            'Dominican Republic': 'République dominicaine',
            'Ecuador': 'Équateur',
            'Egypt': 'Égypte',
            'El Salvador': 'Salvador',
            'Equatorial Guinea': 'Guinée équatoriale',
            'Eritrea': 'Érythrée',
            'Estonia': 'Estonie',
            'Eswatini (fmr. "Swaziland")': 'Eswatini (ex-Swaziland)',
            'Ethiopia': 'Éthiopie',
            'Fiji': 'Fidji',
            'Finland': 'Finlande',
            'France': 'France',
            'Gabon': 'Gabon',
            'Gambia': 'Gambie',
            'Georgia': 'Géorgie',
            'Germany': 'Allemagne',
            'Ghana': 'Ghana',
            'Greece': 'Grèce',
            'Grenada': 'Grenade',
            'Guatemala': 'Guatemala',
            'Guinea': 'Guinée',
            'Guinea-Bissau': 'Guinée-Bissau',
            'Guyana': 'Guyana',
            'Haiti': 'Haïti',
            'Honduras': 'Honduras',
            'Hungary': 'Hongrie',
            'Iceland': 'Islande',
            'India': 'Inde',
            'Indonesia': 'Indonésie',
            'Iran': 'Iran',
            'Iraq': 'Irak',
            'Ireland': 'Irlande',
            'Israel': 'Israël',
            'Italy': 'Italie',
            'Jamaica': 'Jamaïque',
            'Japan': 'Japon',
            'Jordan': 'Jordanie',
            'Kazakhstan': 'Kazakhstan',
            'Kenya': 'Kenya',
            'Kiribati': 'Kiribati',
            'Kuwait': 'Koweït',
            'Kyrgyzstan': 'Kirghizistan',
            'Laos': 'Laos',
            'Latvia': 'Lettonie',
            'Lebanon': 'Liban',
            'Lesotho': 'Lesotho',
            'Liberia': 'Libéria',
            'Libya': 'Libye',
            'Liechtenstein': 'Liechtenstein',
            'Lithuania': 'Lituanie',
            'Luxembourg': 'Luxembourg',
            'Madagascar': 'Madagascar',
            'Malawi': 'Malawi',
            'Malaysia': 'Malaisie',
            'Maldives': 'Maldives',
            'Mali': 'Mali',
            'Malta': 'Malte',
            'Marshall Islands': 'Îles Marshall',
            'Mauritania': 'Mauritanie',
            'Mauritius': 'Maurice',
            'Mexico': 'Mexique',
            'Micronesia': 'Micronésie',
            'Moldova': 'Moldavie',
            'Monaco': 'Monaco',
            'Mongolia': 'Mongolie',
            'Montenegro': 'Monténégro',
            'Morocco': 'Maroc',
            'Mozambique': 'Mozambique',
            'Myanmar (formerly Burma)': 'Myanmar (Birmanie)',
            'Namibia': 'Namibie',
            'Nauru': 'Nauru',
            'Nepal': 'Népal',
            'Netherlands': 'Pays-Bas',
            'New Zealand': 'Nouvelle-Zélande',
            'Nicaragua': 'Nicaragua',
            'Niger': 'Niger',
            'Nigeria': 'Nigéria',
            'North Korea': 'Corée du Nord',
            'North Macedonia': 'Macédoine du Nord',
            'Norway': 'Norvège',
            'Oman': 'Oman',
            'Pakistan': 'Pakistan',
            'Palau': 'Palaos',
            'Palestine State': 'État de Palestine',
            'Panama': 'Panama',
            'Papua New Guinea': 'Papouasie-Nouvelle-Guinée',
            'Paraguay': 'Paraguay',
            'Peru': 'Pérou',
            'Philippines': 'Philippines',
            'Poland': 'Pologne',
            'Portugal': 'Portugal',
            'Qatar': 'Qatar',
            'Romania': 'Roumanie',
            'Russia': 'Russie',
            'Rwanda': 'Rwanda',
            'Saint Kitts and Nevis': 'Saint-Christophe-et-Niévès',
            'Saint Lucia': 'Sainte-Lucie',
            'Saint Vincent and the Grenadines': 'Saint-Vincent-et-les-Grenadines',
            'Samoa': 'Samoa',
            'San Marino': 'Saint-Marin',
            'Sao Tome and Principe': 'Sao Tomé-et-Principe',
            'Saudi Arabia': 'Arabie saoudite',
            'Senegal': 'Sénégal',
            'Serbia': 'Serbie',
            'Seychelles': 'Seychelles',
            'Sierra Leone': 'Sierra Leone',
            'Singapore': 'Singapour',
            'Slovakia': 'Slovaquie',
            'Slovenia': 'Slovénie',
            'Solomon Islands': 'Îles Salomon',
            'Somalia': 'Somalie',
            'South Africa': 'Afrique du Sud',
            'South Korea': 'Corée du Sud',
            'South Sudan': 'Soudan du Sud',
            'Spain': 'Espagne',
            'Sri Lanka': 'Sri Lanka',
            'Sudan': 'Soudan',
            'Suriname': 'Suriname',
            'Sweden': 'Suède',
            'Switzerland': 'Suisse',
            'Syria': 'Syrie',
            'Taiwan': 'Taïwan',
            'Tajikistan': 'Tadjikistan',
            'Tanzania': 'Tanzanie',
            'Thailand': 'Thaïlande',
            'Timor-Leste': 'Timor oriental',
            'Togo': 'Togo',
            'Tonga': 'Tonga',
            'Trinidad and Tobago': 'Trinité-et-Tobago',
            'Tunisia': 'Tunisie',
            'Turkey': 'Turquie',
            'Turkmenistan': 'Turkménistan',
            'Tuvalu': 'Tuvalu',
            'Uganda': 'Ouganda',
            'Ukraine': 'Ukraine',
            'United Arab Emirates': 'Émirats arabes unis',
            'United Kingdom': 'Royaume-Uni',
            'United States of America': 'États-Unis',
            'Uruguay': 'Uruguay',
            'Uzbekistan': 'Ouzbékistan',
            'Vanuatu': 'Vanuatu',
            'Vatican City': 'Vatican',
            'Venezuela': 'Venezuela',
            'Vietnam': 'Vietnam',
            'Yemen': 'Yémen',
            'Zambia': 'Zambie',
            'Zimbabwe': 'Zimbabwe'
        };

        const urlParams = new URLSearchParams(window.location.search);
        const region = urlParams.get('region');
        const regionInFrench = countryNamesInFrench[region] || region;
        document.getElementById('region-name').textContent = regionInFrench;
        document.getElementById('region').value = region;

        const noteTextarea = document.getElementById('note');
        noteTextarea.addEventListener('input', function () {
            this.style.height = 'auto';
            this.style.height = (this.scrollHeight) + 'px';
        });
    </script>

    <script>
        fetch('settings.txt')
            .then(response => response.text())
            .then(data => {
                const settings = JSON.parse(data);
                const countryColor = settings.countryColor || '#ff0000';
                document.documentElement.style.setProperty('--country-color', countryColor);

                const countries = document.querySelectorAll('.country');
                countries.forEach(country => {
                    country.addEventListener('click', () => {
                        country.style.fill = countryColor;
                    });
                });
            });
    </script>

</body>

</html>